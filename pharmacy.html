<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üíä PHARMACY INVENTORY CONSOLE</title>
    <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Orbitron:wght@500;700&display=swap" rel="stylesheet">

    <style>
        /* ‡∏õ‡∏¥‡∏î‡πÑ‡∏ß‡πâ‡∏≠‡∏¢‡∏π‡πà Exit ‡∏≠‡∏±‡∏ô‡∏ï‡∏£‡∏á‡∏Å‡∏•‡∏≤‡∏á */
        /* ------------------------------------------- */
        /* ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏°‡∏ï‡∏£‡∏á‡∏Å‡∏•‡∏≤‡∏á‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á (BOTTOM CENTER ACTION BUTTON) */
        /* ------------------------------------------- */
        
        .action-console-button {
            /* ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á: ‡∏Å‡∏•‡∏≤‡∏á‡∏•‡πà‡∏≤‡∏á (Fixed Position) */
            position: fixed;
            bottom: 90px;
            /* ‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á‡∏à‡∏≤‡∏Å‡∏Ç‡∏≠‡∏ö‡∏•‡πà‡∏≤‡∏á */
            left: 50%;
            /* ‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏°‡∏≤‡∏ó‡∏µ‡πà‡∏Å‡∏∂‡πà‡∏á‡∏Å‡∏•‡∏≤‡∏á‡∏Ç‡∏≠‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠ */
            transform: translateX(-50%);
            /* ‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏Ñ‡∏£‡∏∂‡πà‡∏á‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡∏õ‡∏∏‡πà‡∏° ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏õ‡∏∏‡πà‡∏°‡∏≠‡∏¢‡∏π‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏•‡∏≤‡∏á‡∏û‡∏≠‡∏î‡∏µ */
            z-index: 1000;
            /* ‡πÉ‡∏´‡πâ‡∏õ‡∏∏‡πà‡∏°‡∏≠‡∏¢‡∏π‡πà‡πÄ‡∏´‡∏ô‡∏∑‡∏≠ Element ‡∏≠‡∏∑‡πà‡∏ô‡πÜ */
            /* ‡∏Å‡∏≤‡∏£‡∏ï‡∏Å‡πÅ‡∏ï‡πà‡∏á‡∏õ‡∏∏‡πà‡∏° (‡πÉ‡∏ä‡πâ‡∏ò‡∏µ‡∏°‡∏™‡∏µ‡πÄ‡∏£‡∏∑‡∏≠‡∏á‡πÅ‡∏™‡∏á) */
            display: flex;
            align-items: center;
            padding: 10px 30px;
            border: 2px solid var(--primary-glow);
            /* ‡πÉ‡∏ä‡πâ‡∏™‡∏µ‡πÄ‡∏£‡∏∑‡∏≠‡∏á‡πÅ‡∏™‡∏á‡∏´‡∏•‡∏±‡∏Å (‡πÄ‡∏ä‡πà‡∏ô ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡∏ü‡πâ‡∏≤) */
            background-color: rgba(0, 0, 0, 0.6);
            /* ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÇ‡∏õ‡∏£‡πà‡∏á‡πÅ‡∏™‡∏á‡πÄ‡∏Ç‡πâ‡∏° */
            border-radius: 50px;
            /* ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏Ç‡∏≠‡∏ö‡πÇ‡∏Ñ‡πâ‡∏á‡∏°‡∏ô‡∏î‡∏π‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏° */
            text-decoration: none;
            cursor: pointer;
            box-shadow: 0 0 10px rgba(0, 255, 170, 0.5);
            transition: all 0.3s ease;
        }
        /* ‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ä‡∏µ‡πâ‡πÄ‡∏°‡πâ‡∏≤‡∏™‡πå */
        
        .action-console-button:hover {
            background-color: var(--primary-glow);
            /* ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡πÄ‡∏£‡∏∑‡∏≠‡∏á‡πÅ‡∏™‡∏á */
            color: var(--bg-dark);
            /* ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡πÄ‡∏Ç‡πâ‡∏° */
            box-shadow: 0 0 25px var(--primary-glow), 0 0 50px rgba(255, 255, 255, 0.5);
            /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÅ‡∏™‡∏á‡πÄ‡∏£‡∏∑‡∏≠‡∏á‡πÅ‡∏™‡∏á‡πÄ‡∏Ç‡πâ‡∏°‡∏Ç‡πâ‡∏ô */
            transform: translateX(-50%) scale(1.05);
            /* ‡∏Ç‡∏¢‡∏≤‡∏¢‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡∏∞‡∏Ñ‡∏á‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏Å‡∏•‡∏≤‡∏á‡πÑ‡∏ß‡πâ */
        }
        /* ‡∏™‡πÑ‡∏ï‡∏•‡πå‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô */
        
        .action-icon {
            font-size: 1.5em;
            margin-right: 12px;
            color: var(--primary-glow);
        }
        /* ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° */
        
        .action-text {
            font-family: var(--font-main);
            /* ‡πÉ‡∏ä‡πâ‡∏ü‡∏≠‡∏ô‡∏ï‡πå‡∏´‡∏•‡∏±‡∏Å‡πÅ‡∏ö‡∏ö‡∏•‡πâ‡∏≥‡∏¢‡∏∏‡∏Ñ */
            font-size: 1.1em;
            color: var(--text-light);
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        /* ‡∏™‡πÑ‡∏ï‡∏•‡πå‡πÄ‡∏°‡∏∑‡πà‡∏≠ Hover (‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏µ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏•‡∏∞‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô) */
        
        .action-console-button:hover .action-icon,
        .action-console-button:hover .action-text {
            color: var(--bg-dark);
            /* ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡πÄ‡∏Ç‡πâ‡∏° */
        }
        /*------------------------------------------------------------------------------------------------*/
        /* ------------------------------------------- */
        /* ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ñ‡∏ö‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏ô‡∏≥‡∏ó‡∏≤‡∏á (NAVIGATION BAR) */
        /* ------------------------------------------- */
        
        .navigation-control-bar {
            /* ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÉ‡∏´‡πâ‡∏≠‡∏¢‡∏π‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏•‡∏≤‡∏á‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡∏ï‡∏£‡∏∂‡∏á‡∏≠‡∏¢‡∏π‡πà‡∏Å‡∏±‡∏ö‡∏ó‡∏µ‡πà */
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 1000;
            /* ‡∏à‡∏±‡∏î‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏õ‡∏∏‡πà‡∏°‡πÉ‡∏´‡πâ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡πÅ‡∏ñ‡∏ß‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô */
            display: flex;
            gap: 20px;
            /* ‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏õ‡∏∏‡πà‡∏° */
        }
        
        .nav-btn {
            /* ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏õ‡∏∏‡πà‡∏° */
            display: flex;
            align-items: center;
            padding: 10px 25px;
            border-radius: 50px;
            /* ‡∏Ç‡∏≠‡∏ö‡πÇ‡∏Ñ‡πâ‡∏á‡∏°‡∏ô */
            text-decoration: none;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: var(--font-main);
            text-transform: uppercase;
            letter-spacing: 1px;
            font-size: 1em;
            font-weight: 700;
        }
        /* --- ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏õ‡∏∏‡πà‡∏°‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö (BACK) --- */
        
        .nav-back {
            background-color: rgba(255, 255, 255, 0.1);
            border: 2px solid var(--primary-green);
            /* ‡πÉ‡∏ä‡πâ‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏´‡∏•‡∏±‡∏Å */
            color: var(--primary-glow);
        }
        
        .nav-back:hover {
            background-color: var(--primary-green);
            color: var(--bg-dark);
            /* ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏µ‡πÄ‡∏Ç‡πâ‡∏°‡πÄ‡∏°‡∏∑‡πà‡∏≠ Hover */
            box-shadow: 0 0 15px var(--primary-glow);
            transform: scale(1.05);
        }
        /* --- ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏õ‡∏∏‡πà‡∏°‡πÑ‡∏õ‡∏Ç‡πâ‡∏≤‡∏á‡∏´‡∏ô‡πâ‡∏≤ (FORWARD) --- */
        
        .nav-forward {
            background-color: rgba(57, 255, 20, 0.4);
            /* ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏Ç‡πâ‡∏°‡∏Å‡∏ß‡πà‡∏≤ */
            border: 2px solid var(--primary-glow);
            color: var(--bg-dark);
            /* ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏µ‡πÄ‡∏Ç‡πâ‡∏° */
            box-shadow: 0 0 8px var(--primary-glow);
        }
        
        .nav-forward:hover {
            background-color: var(--primary-glow);
            color: var(--bg-dark);
            box-shadow: 0 0 20px var(--primary-glow);
            transform: scale(1.05);
        }
        /* ‡∏™‡πÑ‡∏ï‡∏•‡πå‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô */
        
        .nav-icon {
            font-size: 1.2em;
            line-height: 1;
            /* ‡∏à‡∏±‡∏î‡πÉ‡∏´‡πâ‡∏≠‡∏¢‡∏π‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏•‡∏≤‡∏á‡πÅ‡∏ô‡∏ß‡∏ï‡∏±‡πâ‡∏á */
        }
        
        .nav-back .nav-icon {
            margin-right: 10px;
        }
        
        .nav-forward .nav-icon {
            margin-left: 10px;
        }
        /* ‡πÄ‡∏°‡∏∑‡πà‡∏≠ Hover ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏µ‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏Ç‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏î‡∏¥‡∏° */
        
        .nav-back:hover .nav-icon {
            color: var(--bg-dark);
        }
        
        .nav-forward:hover .nav-icon {
            color: var(--bg-dark);
        }
        /*----------------------------------------------------------------------*/
        
         :root {
            --primary-green: #39ff14;
            /* ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏ô‡∏µ‡∏≠‡∏≠‡∏ô */
            --primary-glow: #7cff66;
            --alert-yellow: #ffeb3b;
            /* ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Low Stock */
            --bg-dark: #121212;
            --console-bg: rgba(0, 0, 0, 0.9);
            --text-light: #f0f0f0;
            --font-main: 'Orbitron', sans-serif;
            --font-mono: 'Share Tech Mono', monospace;
        }
        
        body {
            font-family: var(--font-mono);
            background-color: var(--bg-dark);
            color: var(--text-light);
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            background-image: radial-gradient(circle, rgba(57, 255, 20, 0.05) 1px, transparent 1px);
            background-size: 40px 40px;
        }
        /* --- Header --- */
        
        .header-console {
            width: 100%;
            padding: 20px 0;
            text-align: center;
            border-bottom: 2px solid var(--primary-green);
            box-shadow: 0 0 10px var(--primary-green);
            margin-bottom: 30px;
        }
        
        h1 {
            font-family: var(--font-main);
            color: var(--primary-glow);
            font-size: 2.2em;
            text-shadow: 0 0 10px var(--primary-glow);
            text-transform: uppercase;
            letter-spacing: 4px;
        }
        /* --- Main Layout --- */
        
        .console-container {
            width: 90%;
            max-width: 1400px;
            padding: 30px;
            background-color: var(--console-bg);
            border: 2px solid var(--primary-green);
            border-radius: 10px;
            box-shadow: 0 0 40px rgba(57, 255, 20, 0.3);
            display: flex;
            gap: 20px;
        }
        /* --- Left Side: Inventory Status --- */
        
        .inventory-status {
            width: 35%;
        }
        
        .stock-card {
            background-color: rgba(57, 255, 20, 0.05);
            border: 1px solid rgba(57, 255, 20, 0.3);
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 5px;
            transition: all 0.3s;
        }
        
        .stock-card.low {
            border-color: var(--alert-yellow);
            box-shadow: 0 0 10px var(--alert-yellow);
            animation: pulse-yellow 1.5s infinite alternate;
        }
        
        .drug-name {
            font-family: var(--font-main);
            font-size: 1.1em;
            color: var(--primary-glow);
            margin-bottom: 5px;
        }
        
        .qty-label {
            font-size: 0.9em;
            color: var(--primary-green);
        }
        
        .qty-value {
            font-size: 2.5em;
            color: var(--text-light);
            text-shadow: 0 0 5px var(--primary-glow);
            font-weight: 700;
        }
        
        .stock-card.low .qty-value {
            color: var(--alert-yellow);
            text-shadow: 0 0 8px var(--alert-yellow);
        }
        /* --- Right Side: Transaction Log --- */
        
        .transaction-log {
            width: 65%;
        }
        
        .transaction-log h2 {
            font-family: var(--font-main);
            color: var(--primary-green);
            font-size: 1.2em;
            border-bottom: 1px dashed var(--primary-green);
            padding-bottom: 5px;
            margin-bottom: 15px;
        }
        
        .log-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9em;
        }
        
        .log-table th,
        .log-table td {
            padding: 8px;
            text-align: left;
            border-bottom: 1px solid rgba(57, 255, 20, 0.1);
        }
        
        .log-table th {
            color: var(--primary-green);
            font-family: var(--font-main);
            text-transform: uppercase;
        }
        /* Animation */
        
        @keyframes pulse-yellow {
            from {
                opacity: 0.8;
            }
            to {
                opacity: 1.0;
            }
        }
    </style>
</head>

<body>
    <div class="header-console">
        <h1>DRUG DISPENSING & INVENTORY CONTROL</h1>
        <p style="color: rgba(240, 240, 240, 0.7); font-size: 0.9em;">PHARMACY AUTOMATION PROTOCOL ACTIVE</p>
    </div>

    <div class="console-container">
        <div class="inventory-status">
            <h2>CRITICAL STOCK LEVELS</h2>

            <div class="stock-card" id="card-paracetamol">
                <div class="drug-name">PARACETAMOL 500 MG</div>
                <div class="qty-label">CURRENT STOCK (UNITS):</div>
                <div class="qty-value" id="qty-paracetamol">320</div>
            </div>

            <div class="stock-card" id="card-amoxicillin">
                <div class="drug-name">AMOXICILLIN 250 MG</div>
                <div class="qty-label">CURRENT STOCK (UNITS):</div>
                <div class="qty-value" id="qty-amoxicillin">85</div>
            </div>

            <div class="stock-card low" id="card-insulin">
                <div class="drug-name">INSULIN NOVORAPID</div>
                <div class="qty-label">CURRENT STOCK (VIALS):</div>
                <div class="qty-value" id="qty-insulin">12</div>
            </div>

            <div class="stock-card" id="card-morphine">
                <div class="drug-name">MORPHINE (CONTROLLED)</div>
                <div class="qty-label">CURRENT STOCK (VIALS):</div>
                <div class="qty-value" id="qty-morphine">25</div>
            </div>
        </div>

        <div class="transaction-log">
            <h2>LAST 10 DISPENSING LOGS (REAL-TIME)</h2>
            <table class="log-table">
                <thead>
                    <tr>
                        <th>TIME</th>
                        <th>PATIENT ID</th>
                        <th>DRUG NAME</th>
                        <th>QTY</th>
                        <th>LOCATION</th>
                    </tr>
                </thead>
                <tbody id="log-body">
                    <tr>
                        <td>09:45:01</td>
                        <td>P-901</td>
                        <td>Paracetamol</td>
                        <td>2</td>
                        <td>ER</td>
                    </tr>
                    <tr>
                        <td>09:44:30</td>
                        <td>P-455</td>
                        <td>Insulin Novorapid</td>
                        <td>1</td>
                        <td>ICU</td>
                    </tr>
                    <tr>
                        <td>09:43:55</td>
                        <td>P-112</td>
                        <td>Amoxicillin</td>
                        <td>4</td>
                        <td>Ward A</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    // ... (‡∏™‡πà‡∏ß‡∏ô HTML ‡πÅ‡∏•‡∏∞ CSS ‡∏Ç‡πâ‡∏≤‡∏á‡∏ï‡πâ‡∏ô) ...
    <script>
        // ... (‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ drugs, stock, logs ‡πÅ‡∏•‡∏∞ getRandomInt ‡πÄ‡∏î‡∏¥‡∏°) ...

        const logBody = document.getElementById('log-body');
        const drugs = [
            // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡πà‡∏≤ Min ‡πÅ‡∏•‡∏∞ Qty
            {
                name: 'Paracetamol 500 MG',
                min: 100,
                qty: 2,
                id: 'card-paracetamol',
                valueId: 'qty-paracetamol'
            }, {
                name: 'Amoxicillin 250 MG',
                min: 50,
                qty: 4,
                id: 'card-amoxicillin',
                valueId: 'qty-amoxicillin'
            }, {
                name: 'Insulin Novorapid',
                min: 15,
                qty: 1,
                id: 'card-insulin',
                valueId: 'qty-insulin'
            }, {
                name: 'Morphine (Controlled)',
                min: 10,
                qty: 1,
                id: 'card-morphine',
                valueId: 'qty-morphine'
            }
        ];

        // Stock: ‡∏î‡∏∂‡∏á‡∏à‡∏≤‡∏Å Local Storage ‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏ä‡πâ‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
        let stock = JSON.parse(localStorage.getItem('pharmacy_stock')) || {
            'Paracetamol 500 MG': 320,
            'Amoxicillin 250 MG': 85,
            'Insulin Novorapid': 12,
            'Morphine (Controlled)': 25
        };

        // ‡∏î‡∏∂‡∏á Log ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏Å‡∏£‡∏≠‡∏Å‡∏à‡∏≤‡∏Å Form
        let logs = JSON.parse(localStorage.getItem('dispense_logs')) || [];

        // ... (Function getRandomInt ‡πÅ‡∏•‡∏∞ updateStockDisplay ‡πÄ‡∏î‡∏¥‡∏°) ...
        function updateStockDisplay() {
            // ... (‡πÇ‡∏Ñ‡πâ‡∏î‡πÄ‡∏î‡∏¥‡∏°) ...
            localStorage.setItem('pharmacy_stock', JSON.stringify(stock));
        }


        // ----------------------------------------------------
        // FUNCTION: ‡πÅ‡∏™‡∏î‡∏á Log ‡πÅ‡∏•‡∏∞‡∏´‡∏±‡∏Å‡∏™‡∏ï‡πá‡∏≠‡∏Å
        // ----------------------------------------------------
        function displayLogs() {
            logBody.innerHTML = '';
            let stockUpdated = false;

            // Process logs from the form first
            logs.forEach(log => {
                // ‡∏´‡∏±‡∏Å‡∏™‡∏ï‡πá‡∏≠‡∏Å‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏• (processed: false)
                if (!log.processed) {
                    const drugFound = drugs.find(d => d.name === log.drugName);
                    if (drugFound) {
                        stock[log.drugName] -= parseInt(log.qty);
                        if (stock[log.drugName] < 0) stock[log.drugName] = 0;

                        log.processed = true; // ‡∏ó‡∏≥‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏´‡∏°‡∏≤‡∏¢‡∏ß‡πà‡∏≤‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡πÅ‡∏•‡πâ‡∏ß
                        stockUpdated = true;
                    }
                }
            });

            // ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏´‡∏±‡∏Å‡∏™‡∏ï‡πá‡∏≠‡∏Å‡πÉ‡∏´‡∏°‡πà ‡πÉ‡∏´‡πâ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å Log ‡πÅ‡∏•‡∏∞ Stock ‡πÉ‡∏´‡∏°‡πà
            if (stockUpdated) {
                localStorage.setItem('dispense_logs', JSON.stringify(logs));
                updateStockDisplay();
            }

            // ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏• Log ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡∏à‡∏≥‡∏Å‡∏±‡∏î 10 ‡πÅ‡∏ñ‡∏ß‡πÅ‡∏£‡∏Å)
            logs.slice(0, 10).forEach(log => {
                const newRow = logBody.insertRow(-1);
                // ‡πÉ‡∏ä‡πâ‡∏ä‡∏∑‡πà‡∏≠‡∏¢‡∏≤‡πÅ‡∏ö‡∏ö‡∏¢‡πà‡∏≠ ‡πÅ‡∏•‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏ï‡πá‡∏°/‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡πÉ‡∏ô Title ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Tooltip
                const drugShort = log.drugName.split(' ')[0];

                newRow.innerHTML = `
                <td>${log.time}</td>
                <td>${log.patientId}</td>
                <td title="Patient: ${log.patientName}, Diagnosis: ${log.diagnosis}">${drugShort}</td>
                <td>${log.qty}</td>
                <td>${log.location}</td>
            `;
            });
        }

        // ----------------------------------------------------
        // FUNCTION: ‡∏à‡∏≥‡∏•‡∏≠‡∏á Log (‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ Log ‡∏à‡∏≤‡∏Å Form ‡πÄ‡∏•‡∏¢)
        // ----------------------------------------------------
        function addSimulationLog() {
            // ... (‡πÇ‡∏Ñ‡πâ‡∏î‡πÄ‡∏î‡∏¥‡∏°) ...
            // ‡πÉ‡∏ä‡πâ‡∏ä‡∏∑‡πà‡∏≠‡∏¢‡∏≤‡πÅ‡∏ö‡∏ö‡∏™‡∏∏‡πà‡∏°‡∏à‡∏≤‡∏Å drugOptions list ‡πÅ‡∏ó‡∏ô
            const drug = drugs[getRandomInt(0, drugs.length - 1)];
            // ... (‡πÇ‡∏Ñ‡πâ‡∏î‡πÄ‡∏î‡∏¥‡∏°) ...

            // ... (‡∏™‡∏£‡πâ‡∏≤‡∏á newLog) ...

            // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ processed ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏´‡∏±‡∏Å‡∏™‡∏ï‡πá‡∏≠‡∏Å‡∏ã‡πâ‡∏≥‡∏ã‡πâ‡∏≠‡∏ô
            newLog.processed = true;

            logs.unshift(newLog);
            // ... (‡∏´‡∏±‡∏Å‡∏™‡∏ï‡πá‡∏≠‡∏Å‡πÅ‡∏•‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å logs ‡πÅ‡∏•‡∏∞ stock) ...

            displayLogs();
        }

        // ----------------------------------------------------
        // INITIALIZATION
        // ----------------------------------------------------

        // 1. ‡πÅ‡∏™‡∏î‡∏á Log ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà
        displayLogs();

        // 2. ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏à‡∏≥‡∏•‡∏≠‡∏á Log ‡∏´‡∏≤‡∏Å‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å Form ‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡πÄ‡∏Å‡∏¥‡∏ô 10 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
        if (logs.filter(log => !log.processed).length === 0) {
            setInterval(addSimulationLog, 3000);
        }
    </script>

    <div class="navigation-control-bar">

        <a href="dispharmacy.html" class="nav-btn nav-back">
            <span class="nav-icon">‚ùÆ</span>
            <span class="nav-text">BACK</span>
        </a>

        <a href="index.html" class="nav-btn nav-forward">
            <span class="nav-text">EXIT</span>
            <span class="nav-icon">‚ùØ</span>
        </a>
    </div>


    <!-- <a href="dispharmacy.html" class="action-console-button">
        <span class="action-icon"></span>
        <span class="action-text">EXIT </span>
    </a>-->


</body>

</html>